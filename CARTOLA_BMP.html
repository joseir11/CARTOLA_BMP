<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>TAÃ‡A NATTOS - 2026</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">

<style>
:root{
  --orange:#f97316;
  --orange-dark:#ea580c;

  --bg:#f4f6f8;
  --card:#ffffff;
  --text:#1f2933;
  --muted:#6b7280;
  --border:#e3e6ea;

  --access:#dcfce7;
  --relegation:#fff1f2;
}

body.dark{
  --bg:#0f172a;
  --card:#111827;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --border:#1f2937;
}

body.dark .access{background:#064e3b;color:#d1fae5;}
body.dark .relegation{background:#7f1d1d;color:#fee2e2;}

*{box-sizing:border-box;font-family:Inter,Arial,sans-serif}

body{margin:0;background:var(--bg);color:var(--text);}

.container{max-width:1000px;margin:30px auto;padding:0 16px;}

.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:14px;
  margin-bottom:24px;
  flex-wrap:wrap;
}

.left-head{display:flex;align-items:center;gap:12px;}

.logo-cartola{width:128px;height:128px;display:flex;align-items:center;justify-content:center;}
.logo-cartola img{width:128px;height:128px;object-fit:contain;}

.title-block{display:flex;flex-direction:column;line-height:1.1;}

.title-block h2{
  font-family:'Montserrat',Arial,sans-serif;
  font-weight:900;
  letter-spacing:1px;
  font-size:42px;
  margin:0;
}

.title-block .badge{
  margin-top:6px;
  background:var(--orange);
  color:#fff;
  padding:4px 12px;
  border-radius:20px;
  font-size:24px;
  align-self:flex-start;
  font-family:'Montserrat', Arial, sans-serif;
  font-weight:900;
  letter-spacing:1px;
}

/* SWITCH */
.switch-container{
  display:flex;
  align-items:center;
  gap:10px;
  font-size:13px;
  color:var(--muted);
}

.switch{position:relative;width:50px;height:26px;}
.switch input{display:none;}

.slider{
  position:absolute;
  inset:0;
  background:#cbd5e1;
  border-radius:26px;
  transition:.3s;
}

.slider:before{
  content:"";
  position:absolute;
  height:20px;
  width:20px;
  left:3px;
  bottom:3px;
  background:white;
  border-radius:50%;
  transition:.3s;
}

input:checked + .slider{background:var(--orange);}
input:checked + .slider:before{transform:translateX(24px);}

.card{
  background:var(--card);
  border-radius:14px;
  box-shadow:0 6px 20px rgba(0,0,0,.06);
  margin-bottom:24px;
  overflow:hidden;
  border:1px solid var(--border);
}

.card-header{
  padding:12px 16px;
  background:linear-gradient(90deg,var(--orange),var(--orange-dark));
  color:#fff;
  font-weight:600;
}

.table{width:100%;border-collapse:collapse;}

.table th,.table td{
  padding:6px 8px;
  border-bottom:1px solid var(--border);
  font-size:clamp(11px,2.6vw,14px);
}

.table th{text-align:left;color:var(--muted);font-weight:600;}

.team-cell{
  display:flex;
  align-items:center;
  gap:8px;
}

.logo{
  width:48px;
  height:48px;
  object-fit:contain;
}

.icon-col{text-align:center;}
.icon-col img{width:32px;height:32px;}

.pos{width:32px;color:var(--muted);}

.access{background:var(--access);}
.relegation{background:var(--relegation);}

.footer-note{text-align:center;color:var(--muted);font-size:13px;margin:20px;}
</style>
</head>

<body>

<div class="container">

<div class="header">
  <div class="left-head">
    <div class="logo-cartola">
      <img src="CARTOLA.png">
    </div>
    <div class="title-block">
      <h2>TAÃ‡A NATTOS - 2026</h2>
      <span class="badge" id="rodadaBadge">RODADA</span>
    </div>
  </div>

  <div class="switch-container">
    <span>ðŸ”…</span>
    <label class="switch">
      <input type="checkbox" id="darkSwitch">
      <span class="slider"></span>
    </label>
    <span>ðŸŒ˜</span>
  </div>
</div>

<div class="card">
  <div class="card-header">SÃ‰RIE A</div>
  <table class="table">
    <thead>
      <tr>
        <th class="pos">POS</th>
        <th>TIME</th>
        <th>C$</th>
        <th>R.E.</th>
        <th>PEN</th>
        <th>TOTAL</th>
        <th>C/G</th>
      </tr>
    </thead>
    <tbody id="serieA"></tbody>
  </table>
</div>

<div class="card">
  <div class="card-header">SÃ‰RIE B</div>
  <table class="table">
    <thead>
      <tr>
        <th class="pos">POS</th>
        <th>TIME</th>
        <th>C$</th>
        <th>R.E.</th>
        <th>PEN</th>
        <th>TOTAL</th>
        <th>C/G</th>
      </tr>
    </thead>
    <tbody id="serieB"></tbody>
  </table>
</div>

<div class="footer-note">TAÃ‡A NATTOS - 2026</div>

</div>

<script>
async function loadCSV(file){
  const res = await fetch(file);
  const text = await res.text();

  const lines = text.trim().split("\n");

  // Primeira linha: texto livre (ex: "RODADA 2")
  const rodada = lines.shift().trim();

  // Detecta separador automaticamente
  const separator = lines[0].includes(";") ? ";" : ",";

  const headers = lines.shift().split(separator);

  const data = lines.map(line=>{
    const values = line.split(separator);
    const obj = {};
    headers.forEach((h,i)=>{
      const v = values[i];
      obj[h] = isNaN(v) ? v : Number(v);
    });
    return obj;
  });

  return {
    rodada,
    serieA: data.filter(t => t.SERIE === "SERIE_A"),
    serieB: data.filter(t => t.SERIE === "SERIE_B")
  };
}

function render(id,data,access=false,releg=false){
  const tbody=document.getElementById(id);
  tbody.innerHTML="";
  data.sort((a,b)=>b.total-a.total);

  data.forEach((t,i)=>{
    const tr=document.createElement("tr");

    if(access && i < 2) tr.classList.add("access");
    if(releg && i >= data.length-2) tr.classList.add("relegation");

    let icon="";
    if(i===0) icon="CAMAROTE.png";
    if(i===data.length-1) icon="GARCON.png";

    tr.innerHTML=`
      <td class="pos">${i+1}</td>
      <td>
        <div class="team-cell">
          <img class="logo" src="./ESCUDOS/${t.nome}.png" onerror="this.src='./ESCUDOS/default.png'">
          ${t.nome}
        </div>
      </td>
      <td>${t.rdd.toLocaleString('pt-BR',{minimumFractionDigits:2})}</td>
      <td>${t.re}</td>
      <td>${t.pen}</td>
      <td>${t.total.toLocaleString('pt-BR',{minimumFractionDigits:2})}</td>
      <td class="icon-col">${icon ? `<img src="${icon}">` : ""}</td>
    `;
    tbody.appendChild(tr);
  });
}

/* DARK MODE */
const darkSwitch=document.getElementById("darkSwitch");
const pref=localStorage.getItem("modo-escuro");

if(pref==="1"){
  document.body.classList.add("dark");
  darkSwitch.checked=true;
}

darkSwitch.addEventListener("change",()=>{
  document.body.classList.toggle("dark",darkSwitch.checked);
  localStorage.setItem("modo-escuro",darkSwitch.checked?"1":"0");
});

loadCSV("TABELA.csv").then(({ rodada, serieA, serieB })=>{
  document.getElementById("rodadaBadge").textContent = rodada;
  render("serieA", serieA, false, true);
  render("serieB", serieB, true, false);
});
</script>

</body>
</html>
